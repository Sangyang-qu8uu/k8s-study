# 主机以及防火墙相关指令

## **配置主机名：**

```sh
hostnamectl set-hostname master && bash
```

## **防火墙相关：**

### **ubuntu**

#### 安装和启用 `ufw`

`ufw` 通常在 Ubuntu 上预装，如果没有安装，可以使用以下命令进行安装：

```sh
sudo apt update
sudo apt install ufw
启用 ufw：
sudo ufw enable
```

#### 基本命令:

##### **查看状态**：

```sh
sudo ufw status
```

##### **允许连接**：

```sh
sudo ufw allow <port>/<protocol>
# 示例：允许 SSH 连接
sudo ufw allow 22/tcp
```

##### **拒绝连接**：

```sh
sudo ufw deny <port>/<protocol>
# 示例：拒绝 HTTP 连接
sudo ufw deny 80/tcp
```

##### **删除规则**：

```sh
sudo ufw delete allow <port>/<protocol>
# 示例：删除允许 SSH 的规则
sudo ufw delete allow 22/tcp
```

##### **禁用 ufw**：

```sh
sudo ufw disable
```

##### 高级操作

###### 1.允许特定 IP 地址访问：

```sh
sudo ufw allow from <IP_address>
# 示例：允许 192.168.1.100 访问
sudo ufw allow from 192.168.1.100
```

###### 2.允许特定 IP 地址访问特定端口：

```sh
sudo ufw allow from <IP_address> to any port <port>
# 示例：允许 192.168.1.100 访问 SSH
sudo ufw allow from 192.168.1.100 to any port 22
```

### **centos**

CentOS 默认使用 `firewalld` 来管理防火墙规则。

#### 安装和启用 `firewalld`

`firewalld` 通常在 CentOS 上预装，如果没有安装，可以使用以下命令进行安装：

````sh
sudo yum install firewalld
````

#### 启用并启动 `firewalld`：

```
sudo systemctl enable firewalld
sudo systemctl start firewalld
```

#### 基本命令

##### 1.查看状态

```sh
sudo firewall-cmd --state
```

##### 2.查看当前规则：

```sh
sudo firewall-cmd --list-all
```

##### 3.允许连接

```
sudo firewall-cmd --permanent --add-port=<port>/<protocol>
sudo firewall-cmd --reload
# 示例：允许 SSH 连接
sudo firewall-cmd --permanent --add-port=22/tcp
sudo firewall-cmd --reload
```

##### 4.拒绝连接

```sh
sudo firewall-cmd --permanent --remove-port=<port>/<protocol>
sudo firewall-cmd --reload
# 示例：拒绝 HTTP 连接
sudo firewall-cmd --permanent --remove-port=80/tcp
sudo firewall-cmd --reload
```

##### 5.禁用 firewalld

````sh
sudo systemctl stop firewalld
sudo systemctl disable firewalld
````

##### 6.高级操作

###### 1.允许特定 IP 地址访问：

```sh
sudo firewall-cmd --permanent --add-service=<service>
sudo firewall-cmd --reload
# 示例：允许 HTTP 服务
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --reload
```

###### 2.允许特定 IP 地址访问特定端口：

```sh
sudo firewall-cmd --permanent --add-rich-rule="rule family='ipv4' source address='<IP_address>' port protocol='<protocol>' port='<port>' accept"
sudo firewall-cmd --reload
# 示例：允许 192.168.1.100 访问 SSH
sudo firewall-cmd --permanent --add-rich-rule="rule family='ipv4' source address='192.168.1.100' port protocol='tcp' port='22' accept"
sudo firewall-cmd --reload
```

最后补充几个centos相关指令:

## **关闭 selinux**

```
#临时
setenforce 0
#永久
 sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config
```

**注意：修改 selinux 配置文件之后，重启机器，selinux 才能永久生效**

```**getenforce**
 getenforce
```

**显示 Disabled 表示 selinux 关闭成功** 

## **配置时间同步** 

```
 yum install -y ntp ntpdate
  ntpdate cn.pool.ntp.org
```

## **编写计划任务**

```sh
crontab -e

* */1 * * * /usr/sbin/ntpdate cn.pool.ntp.org


重启 crond 服务使配置生效： 
systemctl restart crond
```

## 基础安装包

```
yum install -y wget net-tools nfs-utils lrzsz gcc gcc-c++ 
make cmake libxml2-devel openssl-devel curl curl-devel unzip sudo ntp libaio-devel wget vim 
ncurses-devel autoconf automake zlib-devel python-devel epel-release openssh-server 
socat ipvsadm conntrack
```

